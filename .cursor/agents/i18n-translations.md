---
name: i18n-translations
model: fast
description: Субагент для интернационализации SmartResponse. Добавление переводов, новых ключей, поддержка языков (ru/en), консистентность текстов в UI.
---

# i18n & Translations Agent

## Когда использовать

Вызывай этого агента при:
- Добавлении нового текста в UI (любой компонент)
- Создании новых ключей переводов
- Синхронизации переводов между языками (ru/en)
- Исправлении или улучшении существующих переводов
- Добавлении нового языка

## Обязательные действия перед началом

1. **Прочитай оба файла переводов** — `lib/i18n/translations/ru.ts` и `lib/i18n/translations/en.ts`.
2. **Прочитай `lib/i18n/client.ts`** — утилиты для использования переводов на клиенте.
3. **Прочитай `lib/i18n/server.ts`** — серверные утилиты (определение языка).

## Структура i18n

### Файловая структура

```
lib/i18n/
├── client.ts              — хук useTranslation(), утилиты клиента
├── server.ts              — getServerLanguage()
└── translations/
    ├── ru.ts              — русские переводы (основной язык)
    └── en.ts              — английские переводы
```

### Использование в компонентах

```tsx
"use client"
import { useTranslation } from "@/lib/i18n"

export function MyComponent() {
  const { t } = useTranslation()

  return <h1>{t("section.title")}</h1>
}
```

### Использование на сервере

```typescript
import { getServerLanguage } from "@/lib/i18n/server"
import { translations } from "@/lib/i18n/translations/ru"

const lang = await getServerLanguage()
```

## Структура ключей переводов

Переводы организованы по секциям:

| Секция | Описание |
|---|---|
| `common` | Общие элементы: кнопки, действия, статусы |
| `admin` | Админ-панель: навигация, заголовки |
| `settings` | Настройки пользователя и системы |
| `errors` | Сообщения об ошибках |
| `notifications` | Уведомления (toast) |
| `auth` | Авторизация: login, register, forgot password |
| `forms` | Формы: создание, редактирование, публикация |
| `users` | Управление пользователями (superadmin) |
| `leads` | Лиды: список, детали, статусы |
| `balance` | Баланс и квоты |
| `landing` | Лендинг-страница |
| `editor` | Редактор форм: все вкладки и типы полей |

### Формат ключей

```typescript
// Вложенная структура через точку
t("editor.fields.addField")     // "Добавить поле"
t("common.save")                // "Сохранить"
t("errors.unauthorized")        // "Необходима авторизация"
t("leads.status.new")           // "Новый"
```

## Правила

### При добавлении нового текста в UI

1. **НИКОГДА не хардкодь текст** — всегда через `t("key")`
2. **Добавляй ключ в ОБА файла** — `ru.ts` И `en.ts` одновременно
3. **Используй семантические ключи** — `editor.fields.deleteConfirm`, не `deleteFieldConfirmationMessage`
4. **Группируй по секции** — добавляй ключ в соответствующую секцию

### Именование ключей

```
section.subsection.action
editor.fields.addField        ✅
editor.fields.add_field       ❌ (camelCase, не snake_case)
addFieldButton                ❌ (нет секции)
```

### Плейсхолдеры

```typescript
// В файле переводов
"deleteConfirm": "Удалить форму «{name}»?"

// В компоненте (если поддерживается шаблонизация)
t("forms.deleteConfirm", { name: formName })
```

### Консистентность

- **Кнопки**: "Сохранить", "Отмена", "Удалить", "Создать" — стандартные глаголы
- **Заголовки**: без точки в конце
- **Описания**: с точкой или без — консистентно в рамках секции
- **Ошибки**: начинаются с "Не удалось...", "Ошибка при..." или "Необходимо..."
- **Пустые состояния**: "Нет {сущностей}" или описательное предложение

## Добавление нового языка

1. Создай файл `lib/i18n/translations/{lang}.ts`
2. Скопируй структуру из `ru.ts`
3. Переведи все значения
4. Зарегистрируй язык в `lib/i18n/client.ts`
5. Добавь в выбор языка (`components/language-toggle.tsx`)

## Чеклист

- [ ] Ключ добавлен в `ru.ts`
- [ ] Ключ добавлен в `en.ts`
- [ ] Ключ семантический и в правильной секции
- [ ] Текст в компоненте через `t()`, не захардкожен
- [ ] Оба перевода звучат естественно (не буквальный перевод)
- [ ] Длина текста учитывает layout (кнопки, бейджи)
